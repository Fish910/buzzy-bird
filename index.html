<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
  <title>Pitch Bird</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css?family=Comic+Neue:400,700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/ml5@0.12.2/dist/ml5.min.js"></script>
</head>
<body>
  <div id="mainMenu" class="menu">
    <img src="assets/splash.png" alt="Splash" class="splash-img" />
    <div class="menu-buttons">
      <div class="main-menu-btns">
        <button id="skinsBtn">Skins</button>
        <button id="settingsBtn">Settings</button>
        <button id="howToBtn">How to Play</button>
        <button id="creditsBtn">Credits</button>
      </div>
      <div style="display: flex; flex-direction: row; gap: 12px; margin-top: 0;">
        <button id="bugBtn">Report a Bug</button>
        <button id="difficultyBtn">Normal</button>
      </div>
    </div>
      <div class="menu-info">
      <span id="pointsDisplay">Points: 0</span>
      <span id="highScoreDisplay">High Score: 0</span>
    </div>
    <div class="menu-tap">Tap or click anywhere to start!</div>
    <div style="position: absolute; left: 0; right: 0; bottom: 8px; width: 100%; text-align: left; color: #000000; font-size: 1em; pointer-events: none; max-width: 480px; margin: 0 auto;">
         Pitch Bird v4.2.4
    </div>
  </div>
  </div>

  <div id="skinsPopup" class="popup hidden">
    <div class="popup-content">
      <h2>Skins</h2>
      <div id="skinsGrid" class="skins-grid"></div>
      <button id="closeSkinsBtn">Close</button>
    </div>
  </div>

  <!-- How To Play Popup -->
  <div id="howToPopup" class="popup hidden">
    <div class="popup-content">
      <h2>How to Play</h2>
      <div id="howToText" style="max-width: 340px; text-align: left;">
        <!-- Write your instructions here! -->
        <p>Use your voice or instrument to control the bird's height! The higher the pitch, the higher the bird flies. Avoid the pipes and try to get the highest score possible. Pause by tapping/clicking the screen.</p>
        <p></p>
        <p>Click on settings to choose the pitch range that the game will be played in and determine how often you get breaks!</p>
        <p></p>
        <p>More skins coming soon!</p>
      </div>
      <button id="closeHowToBtn">Close</button>
    </div>
  </div>

  <!-- Credits Popup -->
  <div id="creditsPopup" class="popup hidden">
    <div class="popup-content">
      <h2>Credits</h2>
      <div id="creditsText" style="max-width: 340px; text-align: left;">
        <!-- Write your credits here! -->
        <p>Game by Liam Downing.<br>
        Powered by ml5.js and the Web Audio API.<br>
        </p>
      </div>
      <button id="closeCreditsBtn">Close</button>
    </div>
  </div>

  <!-- Settings Popup -->
  <div id="settingsPopup" class="popup hidden">
    <div class="popup-content">
      <h2>Settings</h2>
      <div style="display: flex; flex-direction: column; gap: 18px; align-items: center;">
        <div style="width:100%; text-align:center; font-weight:bold; color:#14a625; margin: 8px 0 0 0; font-size:1.08em;">
          Pitch Range:
        </div>
        <div class="setting-row">
          <label for="topNoteBox">Top Note:</label>
          <div id="topNoteBox" class="note-box">C4</div>
        </div>
        <div class="setting-row">
          <label for="bottomNoteBox">Bottom Note:</label>
          <div id="bottomNoteBox" class="note-box">C3</div>
        </div>
        <div style="width:100%; text-align:center; font-weight:bold; color:#14a625; margin: 8px 0 0 0; font-size:1.08em;">
          Advanced difficulty settings:
        </div>
        <div class="setting-row">
          <label for="pipesPerBreakBox">Pipes per break:</label>
          <div id="pipesPerBreakBox" class="note-box">5</div>
        </div>
        <div class="setting-row">
          <label for="pipeSpeedBox">Pipe speed:</label>
          <div id="pipeSpeedBox" class="note-box">50</div>
        </div>
      </div>
      <button id="closeSettingsBtn">Close</button>
    </div>
  </div>

  <!-- Note Slider Popup -->
  <div id="noteSliderPopup" class="popup hidden">
    <div class="popup-content">
      <h3 id="sliderLabel">Select Note</h3>
      <input type="range" id="noteSlider" min="0" max="71" value="36" style="width: 220px;">
      <div id="sliderNoteDisplay" style="margin-top: 12px; font-size: 1.2em;">C3</div>
      <button id="closeNoteSliderBtn">OK</button>
    </div>
  </div>
  <canvas id="gameCanvas"></canvas>
  <div id="loadingOverlay" class="loading-overlay"></div>
  <script type="module" src="script.js"></script>
</body>
</html>
